/*!
 * Infinite Scroll PACKAGED v4.0.1
 * Automatically add next page
 *
 * Licensed GPLv3 for open source use
 * or Infinite Scroll Commercial License for commercial use
 *
 * https://infinite-scroll.com
 * Copyright 2018-2020 Metafizzy
 */
(function(a,b){"object"==typeof module&&module.exports?module.exports=b(a,require("jquery")):a.jQueryBridget=b(a,a.jQuery)})(window,function(a,b){let c=a.console,d="undefined"==typeof c?function(){}:function(a){c.error(a)};return function(c,e,f){function g(a,b,e){let g,h=`$().${c}("${b}")`;return a.each(function(a,i){let j=f.data(i,c);if(!j)return void d(`${c} not initialized.`+` Cannot call method ${h}`);let k=j[b];if(!k||"_"==b.charAt(0))return void d(`${h} is not a valid method`);let l=k.apply(j,e);g=void 0===g?l:g}),void 0===g?a:g}function h(a,b){a.each(function(a,d){let g=f.data(d,c);g?(g.option(b),g._init()):(g=new e(d,b),f.data(d,c,g))})}f=f||b||a.jQuery;f&&(!e.prototype.option&&(e.prototype.option=function(a){a&&(this.options=Object.assign(this.options||{},a))}),f.fn[c]=function(a,...b){return"string"==typeof a?g(this,a,b):(h(this,a),this)})}}),function(a,b){"object"==typeof module&&module.exports?module.exports=b():a.EvEmitter=b()}("undefined"==typeof window?this:window,function(){function a(){}let b=a.prototype;return b.on=function(a,b){if(!a||!b)return this;let c=this._events=this._events||{},d=c[a]=c[a]||[];return d.includes(b)||d.push(b),this},b.once=function(a,b){if(!a||!b)return this;this.on(a,b);let c=this._onceEvents=this._onceEvents||{},d=c[a]=c[a]||{};return d[b]=!0,this},b.off=function(a,b){let c=this._events&&this._events[a];if(!c||!c.length)return this;let d=c.indexOf(b);return-1!=d&&c.splice(d,1),this},b.emitEvent=function(a,b){let c=this._events&&this._events[a];if(!c||!c.length)return this;c=c.slice(0),b=b||[];let d=this._onceEvents&&this._onceEvents[a];for(let e of c){let c=d&&d[e];c&&(this.off(a,e),delete d[e]),e.apply(this,b)}return this},b.allOff=function(){return delete this._events,delete this._onceEvents,this},a}),function(a,b){"object"==typeof module&&module.exports?module.exports=b(a):a.fizzyUIUtils=b(a)}(this,function(a){let b={};b.extend=function(c,a){return Object.assign(c,a)},b.modulo=function(a,b){return(a%b+b)%b},b.makeArray=function(a){if(Array.isArray(a))return a;if(null===a||void 0===a)return[];let b="object"==typeof a&&"number"==typeof a.length;return b?[...a]:[a]},b.removeFrom=function(a,b){let c=a.indexOf(b);-1!=c&&a.splice(c,1)},b.getParent=function(a,b){for(;a.parentNode&&a!=document.body;)if(a=a.parentNode,a.matches(b))return a},b.getQueryElement=function(a){return"string"==typeof a?document.querySelector(a):a},b.handleEvent=function(a){let b="on"+a.type;this[b]&&this[b](a)},b.filterFindElements=function(a,c){return a=b.makeArray(a),a.filter(a=>a instanceof HTMLElement).reduce((a,b)=>{if(!c)return a.push(b),a;b.matches(c)&&a.push(b);let d=b.querySelectorAll(c);return a=a.concat(...d),a},[])},b.debounceMethod=function(a,b,c){c=c||100;let d=a.prototype[b],e=b+"Timeout";a.prototype[b]=function(){clearTimeout(this[e]);let a=arguments;this[e]=setTimeout(()=>{d.apply(this,a),delete this[e]},c)}},b.docReady=function(a){let b=document.readyState;"complete"==b||"interactive"==b?setTimeout(a):document.addEventListener("DOMContentLoaded",a)},b.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()};let c=a.console;return b.htmlInit=function(d,e){b.docReady(function(){let f=b.toDashed(e),g="data-"+f,h=document.querySelectorAll(`[${g}]`),i=a.jQuery;[...h].forEach(a=>{let b,f=a.getAttribute(g);try{b=f&&JSON.parse(f)}catch(b){return void(c&&c.error(`Error parsing ${g} on ${a.className}: ${b}`))}let h=new d(a,b);i&&i.data(a,e,h)})})},b}),function(a,b){"object"==typeof module&&module.exports?module.exports=b(a,require("ev-emitter"),require("fizzy-ui-utils")):a.InfiniteScroll=b(a,a.EvEmitter,a.fizzyUIUtils)}(window,function(a,b,c){function d(a,b){let g=c.getQueryElement(a);if(!g)return void console.error("Bad element for InfiniteScroll: "+(g||a));if(a=g,a.infiniteScrollGUID){let c=f[a.infiniteScrollGUID];return c.option(b),c}this.element=a,this.options={...d.defaults},this.option(b),e&&(this.$element=e(this.element)),this.create()}let e=a.jQuery,f={};d.defaults={},d.create={},d.destroy={};let g=d.prototype;Object.assign(g,b.prototype);let h=0;g.create=function(){let a=this.guid=++h;this.element.infiniteScrollGUID=a,f[a]=this,this.pageIndex=1,this.loadCount=0,this.updateGetPath();let b=this.getPath&&this.getPath();if(!b)return void console.error("Disabling InfiniteScroll");for(let a in this.updateGetAbsolutePath(),this.log("initialized",[this.element.className]),this.callOnInit(),d.create)d.create[a].call(this)},g.option=function(a){Object.assign(this.options,a)},g.callOnInit=function(){let a=this.options.onInit;a&&a.call(this,this)},g.dispatchEvent=function(a,b,c){this.log(a,c);let d=b?[b].concat(c):c;if(this.emitEvent(a,d),!e||!this.$element)return;a+=".infiniteScroll";let f=a;if(b){let c=e.Event(b);c.type=a,f=c}this.$element.trigger(f,c)};let i={initialized:a=>`on ${a}`,request:a=>`URL: ${a}`,load:(a,b)=>`${a.title||""}. URL: ${b}`,error:(a,b)=>`${a}. URL: ${b}`,append:(a,b,c)=>`${c.length} items. URL: ${b}`,last:(a,b)=>`URL: ${b}`,history:(a,b)=>`URL: ${b}`,pageIndex:function(a,b){return`current page determined to be: ${a} from ${b}`}};g.log=function(a,b){if(!this.options.debug)return;let c=`[InfiniteScroll] ${a}`,d=i[a];d&&(c+=". "+d.apply(this,b)),console.log(c)},g.updateMeasurements=function(){this.windowHeight=a.innerHeight;let b=this.element.getBoundingClientRect();this.top=b.top+a.scrollY},g.updateScroller=function(){let b=this.options.elementScroll;if(!b)return void(this.scroller=a);if(this.scroller=!0===b?this.element:c.getQueryElement(b),!this.scroller)throw new Error(`Unable to find elementScroll: ${b}`)},g.updateGetPath=function(){let a=this.options.path;if(!a)return void console.error(`InfiniteScroll path option required. Set as: ${a}`);let b=typeof a;if("function"==b)return void(this.getPath=a);let c="string"==b&&a.match("{{#}}");return c?void this.updateGetPathTemplate(a):void this.updateGetPathSelector(a)},g.updateGetPathTemplate=function(a){this.getPath=()=>{let b=this.pageIndex+1;return a.replace("{{#}}",b)};let b=a.replace(/(\\\?|\?)/,"\\?").replace("{{#}}","(\\d\\d?\\d?)"),c=new RegExp(b),d=location.href.match(c);d&&(this.pageIndex=parseInt(d[1],10),this.log("pageIndex",[this.pageIndex,"template string"]))};let j=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/],k=d.getPathParts=function(a){if(a)for(let b of j){let c=a.match(b);if(c){let[,a,b,d]=c;return{begin:a,index:b,end:d}}}};g.updateGetPathSelector=function(a){let b=document.querySelector(a);if(!b)return void console.error(`Bad InfiniteScroll path option. Next link not found: ${a}`);let c=b.getAttribute("href"),d=k(c);if(!d)return void console.error(`InfiniteScroll unable to parse next link href: ${c}`);let{begin:e,index:f,end:g}=d;this.isPathSelector=!0,this.getPath=()=>e+(this.pageIndex+1)+g,this.pageIndex=parseInt(f,10)-1,this.log("pageIndex",[this.pageIndex,"next link"])},g.updateGetAbsolutePath=function(){let a=this.getPath(),b=a.match(/^http/)||a.match(/^\//);if(b)return void(this.getAbsolutePath=this.getPath);let{pathname:c}=location,d=a.match(/^\?/),e=c.substring(0,c.lastIndexOf("/")),f=d?c:e+"/";this.getAbsolutePath=()=>f+this.getPath()},d.create.hideNav=function(){let a=c.getQueryElement(this.options.hideNav);a&&(a.style.display="none",this.nav=a)},d.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},g.destroy=function(){for(let a in this.allOff(),d.destroy)d.destroy[a].call(this);delete this.element.infiniteScrollGUID,delete f[this.guid],e&&this.$element&&e.removeData(this.element,"infiniteScroll")},d.throttle=function(a,b){b=b||200;let c,d;return function(){let e=+new Date,f=arguments,g=()=>{c=e,a.apply(this,f)};c&&e<c+b?(clearTimeout(d),d=setTimeout(g,b)):g()}},d.data=function(a){a=c.getQueryElement(a);let b=a&&a.infiniteScrollGUID;return b&&f[b]},d.setJQuery=function(a){e=a},c.htmlInit(d,"infinite-scroll"),g._init=function(){};let{jQueryBridget:l}=a;return e&&l&&l("infiniteScroll",d,e),d}),function(a,b){"object"==typeof module&&module.exports?module.exports=b(a,require("./core")):b(a,a.InfiniteScroll)}(window,function(a,b){function c(a){let b=document.createDocumentFragment();return a&&b.append(...a),b}function d(a){let b=a.querySelectorAll("script");for(let c of b){let a=document.createElement("script"),b=c.attributes;for(let c of b)a.setAttribute(c.name,c.value);a.innerHTML=c.innerHTML,c.parentNode.replaceChild(a,c)}}let e=b.prototype;Object.assign(b.defaults,{loadOnScroll:!0,checkLastPage:!0,responseBody:"text",domParseResponse:!0}),b.create.pageLoad=function(){this.canLoad=!0,this.on("scrollThreshold",this.onScrollThresholdLoad),this.on("load",this.checkLastPage),this.options.outlayer&&this.on("append",this.onAppendOutlayer)},e.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()};let f=new DOMParser;return e.loadNextPage=function(){if(this.isLoading||!this.canLoad)return;let{responseBody:a,domParseResponse:b,fetchOptions:c}=this.options,d=this.getAbsolutePath();this.isLoading=!0,"function"==typeof c&&(c=c());let e;if(c.useJqueryAjax){let g=c;g.url=d,e=$.ajax(g),e.then((c,e,g)=>{if("success"==e){let e=c;"text"==a&&b&&(e=f.parseFromString(e,"text/html")),this.onPageLoad(e,d,g)}})}else e=fetch(d,c),e.then(c=>{if(!c.ok){let a=new Error(c.statusText);return this.onPageError(a,d,c),{response:c}}return c[a]().then(e=>{return"text"==a&&b&&(e=f.parseFromString(e,"text/html")),204==c.status?(this.lastPageReached(e,d),{body:e,response:c}):this.onPageLoad(e,d,c)})}).catch(a=>{this.onPageError(a,d)});return this.dispatchEvent("request",null,[d,e]),e},e.onPageLoad=function(a,b,c){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[a,b,c]),this.appendNextPage(a,b,c)},e.appendNextPage=function(a,b,d){let{append:e,responseBody:f,domParseResponse:g}=this.options;if(!("text"==f&&g)||!e)return{body:a,response:d};let h=a.querySelectorAll(e),i={body:a,response:d,items:h};if(!h||!h.length)return this.lastPageReached(a,b),i;let j=c(h),k=()=>(this.appendItems(h,j),this.isLoading=!1,this.dispatchEvent("append",null,[a,b,h,d]),i);return this.options.outlayer?this.appendOutlayerItems(j,k):k()},e.appendItems=function(a,b){a&&a.length&&(b=b||c(a),d(b),this.element.appendChild(b))},e.appendOutlayerItems=function(c,d){let e=b.imagesLoaded||a.imagesLoaded;return e?new Promise(function(a){e(c,function(){let b=d();a(b)})}):(console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),void(this.isLoading=!1))},e.onAppendOutlayer=function(a,b,c){this.options.outlayer.appended(c)},e.checkLastPage=function(a,b){let{checkLastPage:c,path:d}=this.options;if(!c)return;if("function"==typeof d){let c=this.getPath();if(!c)return void this.lastPageReached(a,b)}let e;if("string"==typeof c?e=c:this.isPathSelector&&(e=d),e&&a.querySelector){let c=a.querySelector(e);c||this.lastPageReached(a,b)}},e.lastPageReached=function(a,b){this.canLoad=!1,this.dispatchEvent("last",null,[a,b])},e.onPageError=function(a,b,c){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[a,b,c]),a},b.create.prefill=function(){if(this.options.prefill){let a=this.options.append;return a?void(this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()):void console.error(`append option required for prefill. Set as :${a}`)}},e.prefill=function(){let a=this.getPrefillDistance();this.isPrefilling=0<=a,this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},e.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},e.stopPrefill=function(){this.log("stopPrefill"),this.off("append",this.prefill)},b}),function(a,b){"object"==typeof module&&module.exports?module.exports=b(a,require("./core"),require("fizzy-ui-utils")):b(a,a.InfiniteScroll,a.fizzyUIUtils)}(window,function(a,b,c){let d=b.prototype;return Object.assign(b.defaults,{scrollThreshold:400}),b.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this),this.resizeHandler=this.onResize.bind(this);let a=this.options.scrollThreshold;(a||0===a)&&this.enableScrollWatch()},b.destroy.scrollWatch=function(){this.disableScrollWatch()},d.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},d.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},d.bindScrollWatchEvents=function(b){let c=b?"addEventListener":"removeEventListener";this.scroller[c]("scroll",this.pageScrollHandler),a[c]("resize",this.resizeHandler)},d.onPageScroll=b.throttle(function(){let a=this.getBottomDistance();a<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),d.getBottomDistance=function(){let b,c;return this.options.elementScroll?(b=this.scroller.scrollHeight,c=this.scroller.scrollTop+this.scroller.clientHeight):(b=this.top+this.element.clientHeight,c=a.scrollY+this.windowHeight),b-c},d.onResize=function(){this.updateMeasurements()},c.debounceMethod(b,"onResize",150),b}),function(a,b){"object"==typeof module&&module.exports?module.exports=b(a,require("./core"),require("fizzy-ui-utils")):b(a,a.InfiniteScroll,a.fizzyUIUtils)}(window,function(a,b,c){let d=b.prototype;Object.assign(b.defaults,{history:"replace"});let e=document.createElement("a");return b.create.history=function(){if(!this.options.history)return;e.href=this.getAbsolutePath();let a=e.origin||e.protocol+"//"+e.host,b=a==location.origin;return b?void(this.options.append?this.createHistoryAppend():this.createHistoryPageLoad()):void console.error("[InfiniteScroll] cannot set history with different origin: "+`${e.origin} on ${location.origin} . History behavior disabled.`)},d.createHistoryAppend=function(){this.updateMeasurements(),this.updateScroller(),this.scrollPages=[{top:0,path:location.href,title:document.title}],this.scrollPage=this.scrollPages[0],this.scrollHistoryHandler=this.onScrollHistory.bind(this),this.unloadHandler=this.onUnload.bind(this),this.scroller.addEventListener("scroll",this.scrollHistoryHandler),this.on("append",this.onAppendHistory),this.bindHistoryAppendEvents(!0)},d.bindHistoryAppendEvents=function(b){let c=b?"addEventListener":"removeEventListener";this.scroller[c]("scroll",this.scrollHistoryHandler),a[c]("unload",this.unloadHandler)},d.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},b.destroy.history=d.destroyHistory=function(){let a=this.options.history&&this.options.append;a&&this.bindHistoryAppendEvents(!1)},d.onAppendHistory=function(a,b,c){if(!c||!c.length)return;let d=c[0],f=this.getElementScrollY(d);e.href=b,this.scrollPages.push({top:f,path:e.href,title:a.title})},d.getElementScrollY=function(b){if(this.options.elementScroll)return b.offsetTop-this.top;else{let c=b.getBoundingClientRect();return c.top+a.scrollY}},d.onScrollHistory=function(){let a=this.getClosestScrollPage();a!=this.scrollPage&&(this.scrollPage=a,this.setHistory(a.title,a.path))},c.debounceMethod(b,"onScrollHistory",150),d.getClosestScrollPage=function(){let b=this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:a.scrollY+this.windowHeight/2;let c;for(let a of this.scrollPages){if(a.top>=b)break;c=a}return c},d.setHistory=function(a,b){let c=this.options.history,d=c&&history[c+"State"];d&&(history[c+"State"](null,a,b),this.options.historyTitle&&(document.title=a),this.dispatchEvent("history",null,[a,b]))},d.onUnload=function(){if(0!==this.scrollPage.top){let b=a.scrollY-this.scrollPage.top+this.top;this.destroyHistory(),scrollTo(0,b)}},d.onPageLoadHistory=function(a,b){this.setHistory(a.title,b)},b}),function(a,b){"object"==typeof module&&module.exports?module.exports=b(a,require("./core"),require("fizzy-ui-utils")):b(a,a.InfiniteScroll,a.fizzyUIUtils)}(window,function(a,b,c){class d{constructor(a,b){this.element=a,this.infScroll=b,this.clickHandler=this.onClick.bind(this),this.element.addEventListener("click",this.clickHandler),b.on("request",this.disable.bind(this)),b.on("load",this.enable.bind(this)),b.on("error",this.hide.bind(this)),b.on("last",this.hide.bind(this))}onClick(a){a.preventDefault(),this.infScroll.loadNextPage()}enable(){this.element.removeAttribute("disabled")}disable(){this.element.disabled="disabled"}hide(){this.element.style.display="none"}destroy(){this.element.removeEventListener("click",this.clickHandler)}}return b.create.button=function(){let a=c.getQueryElement(this.options.button);a&&(this.button=new d(a,this))},b.destroy.button=function(){this.button&&this.button.destroy()},b.Button=d,b}),function(a,b){"object"==typeof module&&module.exports?module.exports=b(a,require("./core"),require("fizzy-ui-utils")):b(a,a.InfiniteScroll,a.fizzyUIUtils)}(window,function(a,b,c){function d(a){f(a,"none")}function e(a){f(a,"block")}function f(a,b){a&&(a.style.display=b)}let g=b.prototype;return b.create.status=function(){let a=c.getQueryElement(this.options.status);a&&(this.statusElement=a,this.statusEventElements={request:a.querySelector(".infinite-scroll-request"),error:a.querySelector(".infinite-scroll-error"),last:a.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},g.bindHideStatus=function(a){let b=this.options.append?"append":"load";this[a](b,this.hideAllStatus)},g.showRequestStatus=function(){this.showStatus("request")},g.showErrorStatus=function(){this.showStatus("error")},g.showLastStatus=function(){this.showStatus("last"),this.bindHideStatus("off")},g.showStatus=function(a){e(this.statusElement),this.hideStatusEventElements();let b=this.statusEventElements[a];e(b)},g.hideAllStatus=function(){d(this.statusElement),this.hideStatusEventElements()},g.hideStatusEventElements=function(){for(let a in this.statusEventElements){let b=this.statusEventElements[a];d(b)}},b}),function(a,b){'use strict';"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(c){return b(a,c)}):"object"==typeof module&&module.exports?module.exports=b(a,require("ev-emitter")):a.imagesLoaded=b(a,a.EvEmitter)}("undefined"==typeof window?this:window,function(a,b){'use strict';function c(c,a){for(var b in a)c[b]=a[b];return c}function d(a){if(Array.isArray(a))return a;var b="object"==typeof a&&"number"==typeof a.length;return b?j.call(a):[a]}function e(a,b,f){if(!(this instanceof e))return new e(a,b,f);var g=a;return"string"==typeof a&&(g=document.querySelectorAll(a)),g?void(this.elements=d(g),this.options=c({},this.options),"function"==typeof b?f=b:c(this.options,b),f&&this.on("always",f),this.getImages(),h&&(this.jqDeferred=new h.Deferred),setTimeout(this.check.bind(this))):void i.error("Bad element for imagesLoaded "+(g||a))}function f(a){this.img=a}function g(a,b){this.url=a,this.element=b,this.img=new Image}var h=a.jQuery,i=a.console,j=Array.prototype.slice;e.prototype=Object.create(b.prototype),e.prototype.options={},e.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},e.prototype.addElementImages=function(a){"IMG"==a.nodeName&&this.addImage(a),!0===this.options.background&&this.addElementBackgroundImages(a);var b=a.nodeType;if(b&&k[b]){for(var c,d=a.querySelectorAll("img"),e=0;e<d.length;e++)c=d[e],this.addImage(c);if("string"==typeof this.options.background){var f=a.querySelectorAll(this.options.background);for(e=0;e<f.length;e++){var g=f[e];this.addElementBackgroundImages(g)}}}};var k={1:!0,9:!0,11:!0};return e.prototype.addElementBackgroundImages=function(a){var b=getComputedStyle(a);if(b)for(var c,d=/url\((['"])?(.*?)\1\)/gi,e=d.exec(b.backgroundImage);null!==e;)c=e&&e[2],c&&this.addBackground(c,a),e=d.exec(b.backgroundImage)},e.prototype.addImage=function(a){var b=new f(a);this.images.push(b)},e.prototype.addBackground=function(a,b){var c=new g(a,b);this.images.push(c)},e.prototype.check=function(){function a(a,c,d){setTimeout(function(){b.progress(a,c,d)})}var b=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(b){b.once("progress",a),b.check()}):void this.complete()},e.prototype.progress=function(a,b,c){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded,this.emitEvent("progress",[this,a,b]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,a),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+c,a,b)},e.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(a,[this]),this.emitEvent("always",[this]),this.jqDeferred){var b=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[b](this)}},f.prototype=Object.create(b.prototype),f.prototype.check=function(){var a=this.getIsImageComplete();return a?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):void(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},f.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},f.prototype.confirm=function(a,b){this.isLoaded=a,this.emitEvent("progress",[this,this.img,b])},f.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},f.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},f.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},f.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},g.prototype=Object.create(f.prototype),g.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var a=this.getIsImageComplete();a&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},g.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},g.prototype.confirm=function(a,b){this.isLoaded=a,this.emitEvent("progress",[this,this.element,b])},e.makeJQueryPlugin=function(b){b=b||a.jQuery,b&&(h=b,h.fn.imagesLoaded=function(a,b){var c=new e(this,a,b);return c.jqDeferred.promise(h(this))})},e.makeJQueryPlugin(),e});